import{a as c}from"./chunk-2RWO5XTS.mjs";import"./chunk-T26L3XB2.mjs";import{a as d}from"./chunk-L2QST3WI.mjs";import{a as u}from"./chunk-FLEKYJ45.mjs";import"./chunk-QFC5QINS.mjs";import"./chunk-447LAB3U.mjs";import{c as n}from"./chunk-YNSIXYNX.mjs";import l from"node-fetch";var y=class{constructor(e){this.sid=e}doQuery(e,r){return n(this,null,function*(){let s=yield l("https://replit.com/graphql",{method:"POST",headers:{"User-Agent":"mozilla/5.0",referer:"https://replit.com","X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",Cookie:this.sid?`connect.sid=${this.sid}`:""},body:JSON.stringify({query:e,variables:r})}),t=yield s.json();if(t.errors)throw new Error(`Failed to query.
Query: '${e}'
Variables: ${JSON.stringify(r)}
Status: ${s.status}
${JSON.stringify(t.errors)}`);return t})}userByUsername(e,r){return n(this,null,function*(){let s=r(d);return(yield this.doQuery(`query Query($username: String!) { userByUsername(username: $username) { ${s.join(" ")} } }`,{username:e})).data.userByUsername})}userById(e,r){return n(this,null,function*(){let s=r(d);return(yield this.doQuery(`query Query($id: Int!) { user(id: $id) { ${s.join(" ")} } }`,{id:e})).data.user})}replById(e,r){return n(this,null,function*(){let s=r(u);return(yield this.doQuery(`query Query($replId: String!) { repl(id: $replId) { ... on Repl { ${s.join(" ")} } } }`,{replId:e})).data.repl})}replByURL(e,r){return n(this,null,function*(){let s=r(u);return(yield this.doQuery(`query Query($replUrl: String!) { repl(url: $replUrl) { ... on Repl { ${s.join(" ")} } } }`,{replUrl:e})).data.repl})}currentUser(e){return n(this,null,function*(){let r=e(c);return(yield this.doQuery(`query Query { currentUser { ${r.join(" ")} } }`,{})).data.currentUser})}paginated(e,r){return n(this,null,function*(){let s=yield e(),t=0,a=[s],i=r(s);return{current:()=>a[t],next:()=>n(this,null,function*(){if(!i.hasNextPage)return{success:!1,error:"no more pages"};if(t++,t<a.length)return{success:!0,data:a[t]};let o=yield e(i.nextCursor);return a.push(o),i=r(o),{success:!0,data:o}}),back:()=>(t--,t<0?{success:!1,error:"no more pages"}:{success:!0,data:a[t]})}})}};export{y as Client};
