import{a as d}from"./chunk-2RWO5XTS.mjs";import"./chunk-T26L3XB2.mjs";import{a as c}from"./chunk-L2QST3WI.mjs";import{a as u}from"./chunk-FLEKYJ45.mjs";import"./chunk-QFC5QINS.mjs";import"./chunk-447LAB3U.mjs";import{c as n}from"./chunk-YNSIXYNX.mjs";import p from"node-fetch";var y=class{constructor(r){this.sid=r}doQuery(r,t){return n(this,null,function*(){let s=yield p("https://replit.com/graphql",{method:"POST",headers:{"User-Agent":"mozilla/5.0",referer:"https://replit.com","X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",Cookie:this.sid?`connect.sid=${this.sid}`:""},body:JSON.stringify({query:r,variables:t})}),e=yield s.json();if(e.errors)throw new Error(`Status: ${s.status}, ${JSON.stringify(e.errors)}`);return e})}userByUsername(r,t){return n(this,null,function*(){let s=t(c);return(yield this.doQuery(`query Query($username: String!) { userByUsername(username: $username) { ${s.join(" ")} } }`,{username:r})).data.userByUsername})}replById(r,t){return n(this,null,function*(){let s=t(u);return(yield this.doQuery(`query Query($replId: String!) { repl(id: $replId) { ${s.join(" ")} } }`,{replId:r})).data.userByUsername})}currentUser(r){return n(this,null,function*(){let t=r(d);return(yield this.doQuery(`query Query { currentUser { ${t.join(" ")} } }`,{})).data.currentUser})}paginated(r,t){return n(this,null,function*(){let s=yield r(),e=0,a=[s],o=t(s);return{current:()=>a[e],next:()=>n(this,null,function*(){if(!o.hasNextPage)return{success:!1,error:"no more pages"};if(e++,e<a.length)return{success:!0,data:a[e]};let i=yield r(o.nextCursor);return a.push(i),o=t(i),{success:!0,data:i}}),back:()=>(e--,e<0?{success:!1,error:"no more pages"}:{success:!0,data:a[e]})}})}};export{y as Client};
