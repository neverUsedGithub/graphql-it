"use strict";var A=Object.create;var u=Object.defineProperty,N=Object.defineProperties,P=Object.getOwnPropertyDescriptor,k=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertyNames,x=Object.getOwnPropertySymbols,S=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var f=(r,e,t)=>e in r?u(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,y=(r,e)=>{for(var t in e||(e={}))F.call(e,t)&&f(r,t,e[t]);if(x)for(var t of x(e))q.call(e,t)&&f(r,t,e[t]);return r},C=(r,e)=>N(r,k(e));var j=(r,e)=>{for(var t in e)u(r,t,{get:e[t],enumerable:!0})},T=(r,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of $(e))!F.call(r,i)&&i!==t&&u(r,i,{get:()=>e[i],enumerable:!(s=P(e,i))||s.enumerable});return r};var L=(r,e,t)=>(t=r!=null?A(S(r)):{},T(e||!r||!r.__esModule?u(t,"default",{value:r,enumerable:!0}):t,r)),v=r=>T(u({},"__esModule",{value:!0}),r);var o=(r,e,t)=>new Promise((s,i)=>{var n=l=>{try{a(t.next(l))}catch(c){i(c)}},d=l=>{try{a(t.throw(l))}catch(c){i(c)}},a=l=>l.done?s(l.value):Promise.resolve(l.value).then(n,d);a((t=t.apply(r,e)).next())});var O={};j(O,{Client:()=>p});module.exports=v(O);var w=L(require("node-fetch"));var b={id:"id",icon:"icon",displayName:"displayName"};var R={id:"id",isOfficial:"isOfficial"};var g={title:"title",id:"id",iconUrl:"iconUrl",url:"url",templateLabel:"templateLabel",isPrivate:"isPrivate",isRenamed:"isRenamed",imageUrl:"imageUrl",language:"language",likeCount:"likeCount",timeUpdated:"timeUpdated",timeCreated:"timeCreated",description:"description(plainText: true)",publicForkCount:"publicForkCount",releasesForkCount:"releasesForkCount",slug:"slug",wasPosted:"wasPosted",wasPublished:"wasPublished",publishedAs:"publishedAs",lang:r=>`lang { ${r(b).join(" ")} }`,tags:r=>` tags { ${r(R).join(" ")} }`};var m={username:"username",image:"image",id:"id",bio:"bio",fullName:"fullName",firstName:"firstName",lastName:"lastName",url:"url",userSubscriptionType:"userSubscriptionType",followerCount:"followerCount",followers:(r,e)=>{var t,s;return`followers(count: ${(t=e==null?void 0:e.count)!=null?t:10}, after: ${JSON.stringify((s=e==null?void 0:e.after)!=null?s:null)}) { items { ${r(m).join(" ")} } pageInfo { nextCursor hasNextPage } }`},publicRepls:(r,e)=>{var t,s;return`publicRepls(count: ${(t=e==null?void 0:e.count)!=null?t:10}, after: ${JSON.stringify((s=e==null?void 0:e.after)!=null?s:null)}) { items { ${r(g).join(" ")} } pageInfo { nextCursor hasNextPage } }`}};var U={image:"image",username:"username",url:"url",id:"id"};var h=C(y({},m),{teams:r=>`teams { ${r(U).join(" ")} }`});var p=class{constructor(e){this.sid=e}doQuery(e,t){return o(this,null,function*(){let s=yield(0,w.default)("https://replit.com/graphql",{method:"POST",headers:{"User-Agent":"mozilla/5.0",referer:"https://replit.com","X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",Cookie:this.sid?`connect.sid=${this.sid}`:""},body:JSON.stringify({query:e,variables:t})}),i=yield s.json();if(i.errors)throw new Error(`Status: ${s.status}, ${JSON.stringify(i.errors)}`);return i})}userByUsername(e,t){return o(this,null,function*(){let s=t(m);return(yield this.doQuery(`query Query($username: String!) { userByUsername(username: $username) { ${s.join(" ")} } }`,{username:e})).data.userByUsername})}replById(e,t){return o(this,null,function*(){let s=t(g);return(yield this.doQuery(`query Query($replId: String!) { repl(id: $replId) { ${s.join(" ")} } }`,{replId:e})).data.userByUsername})}currentUser(e){return o(this,null,function*(){let t=e(h);return(yield this.doQuery(`query Query { currentUser { ${t.join(" ")} } }`,{})).data.currentUser})}paginated(e,t){return o(this,null,function*(){let s=yield e(),i=0,n=[s],d=t(s);return{current:()=>n[i],next:()=>o(this,null,function*(){if(!d.hasNextPage)return{success:!1,error:"no more pages"};if(i++,i<n.length)return{success:!0,data:n[i]};let a=yield e(d.nextCursor);return n.push(a),d=t(a),{success:!0,data:a}}),back:()=>(i--,i<0?{success:!1,error:"no more pages"}:{success:!0,data:n[i]})}})}};0&&(module.exports={Client});
